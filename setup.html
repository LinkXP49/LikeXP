<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LinkXP – Create Your Profile</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* same styles as your current setup.html */
</style>
</head>
<body>

<header>
  <h1>LinkXP Profile Setup</h1>
  <p>Create your account or login to access your universal gamer profile and connect with your squad.</p>
</header>

<div class="form-container">
  <div class="tabs">
    <div class="tab active" id="login-tab">Login</div>
    <div class="tab" id="signup-tab">Create Profile</div>
  </div>

  <div class="alert" id="alert"></div>

  <form id="auth-form">
    <label for="email">Email</label>
    <input type="email" id="email" placeholder="Enter your email" required>

    <label for="username" id="username-label">Username</label>
    <input type="text" id="username" placeholder="Enter a username" required>

    <label for="password">Password</label>
    <input type="password" id="password" placeholder="Enter password" required>

    <button type="submit" id="submit-btn">Login</button>
  </form>
</div>

<footer>
  <p>© 2026 LinkXP. All Rights Reserved.</p>
  <p><a href="index.html">Home</a> • <a href="#">Privacy Policy</a></p>
</footer>

<script>
const loginTab = document.getElementById('login-tab');
const signupTab = document.getElementById('signup-tab');
const usernameField = document.getElementById('username');
const usernameLabel = document.getElementById('username-label');
const submitBtn = document.getElementById('submit-btn');
const alertBox = document.getElementById('alert');

let isLogin = true;

function showAlert(message) {
  alertBox.textContent = message;
  alertBox.style.display = 'block';
  setTimeout(() => { alertBox.style.display = 'none'; }, 3000);
}

// Switch tabs
loginTab.addEventListener('click', () => {
  isLogin = true;
  loginTab.classList.add('active');
  signupTab.classList.remove('active');
  usernameField.style.display = 'none';
  usernameLabel.style.display = 'none';
  submitBtn.textContent = 'Login';
});

signupTab.addEventListener('click', () => {
  isLogin = false;
  signupTab.classList.add('active');
  loginTab.classList.remove('active');
  usernameField.style.display = 'block';
  usernameLabel.style.display = 'block';
  submitBtn.textContent = 'Create Profile';
});

// Form submit
const form = document.getElementById('auth-form');
form.addEventListener('submit', (e) => {
  e.preventDefault();
  const email = document.getElementById('email').value.trim();
  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value;

  if (!email || !password || (!isLogin && !username)) {
    showAlert('Please fill out all fields.');
    return;
  }

  let users = JSON.parse(localStorage.getItem('users') || '{}');

  if (isLogin) {
    if (users[email] && users[email].password === password) {
      showAlert('Login successful! Redirecting...');
      localStorage.setItem('currentUser', JSON.stringify({ email, username: users[email].username }));
      setTimeout(() => { window.location.href = 'profile-edit.html'; }, 1000);
    } else {
      showAlert('Invalid email or password.');
    }
  } else {
    if (users[email]) {
      showAlert('Email already registered.');
      return;
    }
    users[email] = { username, password, profile: {} };
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUser', JSON.stringify({ email, username }));
    showAlert('Profile created! Redirecting...');
    setTimeout(() => { window.location.href = 'profile-edit.html'; }, 1000);
  }
});

// Hide username by default
usernameField.style.display = 'none';
usernameLabel.style.display = 'none';
</script>

</body>
</html>
